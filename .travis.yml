language: elixir

dist: trusty
sudo: required

install:
    - mix local.rebar --force
    - mix local.hex --force
    - mix deps.get
    - MIX_ENV=test mix compile

script:
    .travis/script.sh $PRESET

env:
    - PRESET=test

elixir:
    - 1.6

otp_release:
    - 20.3.6
 #   - 21.0

matrix:
  include:
    - otp_release: 20.3.6
      elixir: 1.6.6
      env: PRESET=dialyzer

cache:
  directories:
      - .dialyzer
